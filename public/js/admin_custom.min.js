/*! laravel-assets 2014-10-08 04:10:58 */

function cms_table_query(a){$.each(a,function(a,b){var c='#_table-queries input[name="'+a+'"]';$input=$(c),$input.length&&$input.val(b)}),$("#_table-queries").submit()}function remove_parent_tr(a){$(a).parents("tr").remove()}function appendable_form_remove_btn(a){var b=$(a);b.parents(".appendable").remove()}function modal_select_this_one_btn(a){var b=$(a),c=b.parents(".modal"),d=b.parents(".form-group").find(".picked-item-span"),e=b.attr("data-attr-url"),f={field:b.parents(".modal").attr("data-attr-field"),id:b.attr("data-attr-id"),_token:b.attr("data-csrf-token")};console.log(f),c.modal("hide"),d.load(e,f)}var artDialog={};artDialog.confirm=function(a){var b={title:"请确认",content:"确认要执行此操作吗",yes:"确定",no:"取消",confirmed:function(){},canceled:function(){}},a=$.extend(b,a||{}),c=dialog({title:a.title,content:a.content,okValue:a.yes,ok:a.confirmed,cancelValue:a.no,cancel:a.canceled});c.show()},$(function(){$("select[form-role='multi-select']").multiselect({selectedList:6}).multiselectfilter(),$("select[form-role='single-select']").multiselect({multiple:!1,selectedList:1}).multiselectfilter()}),function(a){a.extend({getUrl:function(){var a=window.location.href.split("?"),b={},c={url:"",get:{}};if(a.length>1){for(var d=a[1].split("&"),e=d.length,f=0;e>f;f++){var g=d[f].split("=");g[0]&&(b[g[0]]=g[1])}c.url=a[0],c.get=b}else c.url=window.location.href;return c},createUrl:function(b){var c=b.url,d=!0;return a.each(b.get,function(a,b){d?(d=!1,c=c+"?"+a+"="+b):c=c+"&"+a+"="+b}),c}})}(jQuery),$(function(){$("table[data-role='table'] div.table-sort-btn").each(function(a,b){var c=$(b),d=c.attr("attr-field"),e=c.find('button[attr-btn-sort="asc"]'),f=c.find('button[attr-btn-sort="desc"]');e.click(function(){cms_table_query({sort:d,order:"asc"})}),f.click(function(){cms_table_query({sort:d,order:"desc"})})}),$("table[data-role='table'] .input-table-search").each(function(a,b){var c=$(b),d=c.attr("attr-field"),e=c.parents("div.input-group"),f=e.find("div.table-search-btn"),g=e.find("div.table-reset-search-btn");console.log(f),f.click(function(){var a=$(this).parents("div.input-group").find(".input-table-search").val();cms_table_query({search:a,field:d})}),g.click(function(){cms_table_query({search:null,field:null})})}),$("table[data-role='table'] .btn-table-groupby").each(function(a,b){var c=$(b),d=c.attr("attr-field"),e=c.attr("attr-groupby");c.click(function(){cms_table_query({groupby:d,group_value:e})})}),$("table[data-role='table'] .table-role-btn-switch").each(function(a,b){var c=$(b),d=c.attr("data-attr-token"),e=c.attr("data-attr-url"),f=c.attr("data-attr-id"),g=c.html();c.click(function(){artDialog.confirm({content:"确定要修改状态为"+g+"吗",confirmed:function(){$.ajax({url:e,type:"POST",data:{status:g,id:f,_token:d},success:function(a){console.log(a),c.parents(".btn-group").find(".btn-current-status").html(g)}})}})})})}),$(function(){$('a[form-role="tag-remove"]').click(function(){$(this).parents("span.label").remove()}),$('.btn[form-role="add-tag"]').click(function(){var a=$.trim($(this).parents(".input-group").find("input").val()),b=$.trim($(this).attr("form-attr-field")),c='<span class="label label-info" style="display:inline-block;margin-right:5px;">'+a+'<a href="javascript:;" form-role="tag-remove" style="margin-left:10px;">x</a><input style="display:none;" name="'+b+'" value="'+a+'"></span>';$(this).parents(".form-group").find(".tags-span").append(c),$('a[form-role="tag-remove"]').unbind("click"),$('a[form-role="tag-remove"]').click(function(){$(this).parents("span.label").remove()})}),$("input[data-form-date-role='date']").each(function(a,b){$(b).datepicker()}),$("input[data-form-date-role='daterange']").each(function(a,b){$(b).daterangepicker({format:"YYYY-MM-DD hh:mm:ss",timePicker:!0,separator:"到"})}),$('.btn[form-role="appendable"]').click(function(){var a=$(this),b=a.attr("data-attr-append-url"),c=a.parents(".form-group").find(".appendable-inputs");$.ajax({url:b,success:function(a){c.append(a)}})}),$('a[data-role="table-selecte-all"]').click(function(){$('input[data-role="form-selection"]').iCheck("check")}),$('a[data-role="table-selecte-none"]').click(function(){$('input[data-role="form-selection"]').iCheck("uncheck")}),$('a[data-role="table-group-action"]').click(function(){var a=$(this),b=a.attr("data-attr-token"),c=a.attr("data-attr-url"),d=$("<form>"),e=$("<input>").attr("name","_token").val(b);d.attr("method","POST"),d.attr("action",c),d.attr("target","_blank"),d.css("display","none"),d.append(e),$('input[data-role="form-selection"]').each(function(a,b){var c=$(b),e=c.is(":checked"),f=c.attr("data-attr-id");e&&d.append($("<input>").attr("name","id[]").val(f))}),console.log(d),$("body").append(d),d.submit()})}),$(function(){$('textarea[form-data-role="wysiwyg"]').each(function(a,b){var c=$(b).attr("name");CKEDITOR.replace(c)}),$('input[form-role="image-upload-richtext"]').each(function(index,one){var $one=$(one),id=$one.attr("id"),$target=$one.parents("div.form-group").find(".uploadify-result"),options={formData:{_token:$one.parents("form").find("input[name='_token']").val(),type:"default"},swf:$one.attr("uploadify-swf-path"),uploader:$one.attr("uploadify-upload-url"),buttonImage:"http://labor.qiniudn.com/lib/uploadify/browse-btn.png",cancleImage:"http://labor.qiniudn.com/lib/uploadify/uploadify-cancel.png",buttonClass:"uploadify",onUploadSuccess:function(file,data,response){console.log("data is:"),console.log(data),eval("data="+data),$target.val(data.file_url)}};$("#"+id).uploadify(options)})}),$(function(){$("div[form-role='image-upload']").each(function(index,div){var $div=$(div),options={formData:{_token:$div.parents("form").find("input[name='_token']").val(),type:$div.attr("uploadify-image-type")},swf:$div.attr("uploadify-swf-path"),uploader:$div.attr("uploadify-upload-url"),buttonImage:"http://labor.qiniudn.com/lib/uploadify/browse-btn.png",cancleImage:"http://labor.qiniudn.com/lib/uploadify/uploadify-cancel.png",buttonClass:"uploadify",onUploadSuccess:function(file,data,response){console.log("data is:"),console.log(data),eval("data="+data);var $img=$div.find("img.uploadify-image"),$input=$div.find("input.uploadify-input");void 0!==data.file_url&&($img.attr("src",data.file_url),$input.attr("value",data.file_url))}},id=$div.find("input[type='file']").attr("id");$("#"+id).uploadify(options)}),$("div[form-role='multi-image-upload']").each(function(index,div){var $div=$(div),$container=$div.find("div.uploadify-multi-image-container"),name=$div.attr("uploadify-field-name"),options={formData:{_token:$div.parents("form").find("input[name='_token']").val(),type:$div.attr("uploadify-image-type")},swf:$div.attr("uploadify-swf-path"),uploader:$div.attr("uploadify-upload-url"),buttonImage:"http://labor.qiniudn.com/lib/uploadify/browse-btn.png",cancleImage:"http://labor.qiniudn.com/lib/uploadify/uploadify-cancel.png",buttonClass:"uploadify",onUploadSuccess:function(file,data,response){if(console.log("data is:"),console.log(data),eval("data="+data),void 0!==data.file_url){var html='<div class="uploadify-image"><img src="{$image}" class="img-responsive uploadify-image"><input value="{$image}" name="{$name}" style="display:none"><a href="javascript:;" class="uploadify-remove-image" onclick="$(this).parents(\'div.uploadify-image\').remove();">x</a></div>';html=html.replace(/\{\$image\}/g,data.file_url),html=html.replace(/\{\$name\}/g,name),console.log(html),$container.append(html)}}},id=$div.find("input[type='file']").attr("id");$("#"+id).uploadify(options)})}),$(function(){$(".btn-submit-form-inside").click(function(){var a=$(this),b=$(a).find("form"),c=$(this).attr("data-attr-confirm");b.length&&(c?artDialog.confirm({content:c,confirmed:function(){b.submit()}}):b.submit())})}),$(function(){$('input[type="checkbox"].gofarms-admin-switch').each(function(a,b){var c=$(b),d=c.checked;c.bootstrapSwitch({state:d}),c.on("switchChange.bootstrapSwitch",function(a,b){console.log(this),console.log(a),console.log(b);var c=$(this).attr("data-action-on"),d=$(this).attr("data-action-off"),e=$(this).attr("data-item-id"),f=$(this).attr("data-token");b?(console.log({url:c,type:"post",data:{_token:f,"id[]":e}}),$.ajax({url:c,type:"post",data:{_token:f,"id[]":e}})):(console.log({url:d,type:"post",data:{_token:f,"id[]":e}}),$.ajax({url:d,type:"post",data:{_token:f,"id[]":e}}))})})}),$(function(){$(".btn-search-modal-search").click(function(){var a=$(this),b=a.parents(".modal-content").find(".modal-body-results"),c=a.parents(".modal-content").find(".modal-body-search"),d=a.parents(".modal-content").find(".btn-search-modal-reset"),e=a.parents(".modal-content").find(".modal-search-pattern").val(),f=a.attr("data-attr-ajax-url"),g={pattern:e,field:a.parents(".modal").attr("field"),_token:a.attr("data-csrf-token")};console.log(f),console.log(g),console.log(b),b.show(),c.hide(),a.hide(),b.html("loading..."),b.load(f,g,function(a,b){console.log(a),console.log(b),d.show()})}),$(".btn-search-modal-reset").click(function(){var a=$(this),b=a.parents(".modal-content").find(".modal-body-results"),c=a.parents(".modal-content").find(".modal-body-search"),d=a.parents(".modal-content").find(".btn-search-modal-search");b.hide(),c.show(),d.show(),$(this).hide()})});
//# sourceMappingURL=admin_custom.min.js.map